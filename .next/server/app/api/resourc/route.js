"use strict";(()=>{var e={};e.id=540,e.ids=[540],e.modules={11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},12781:e=>{e.exports=require("stream")},73837:e=>{e.exports=require("util")},13155:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>f,originalPathname:()=>h,patchFetch:()=>R,requestAsyncStorage:()=>q,routeModule:()=>g,serverHooks:()=>y,staticGenerationAsyncStorage:()=>x,staticGenerationBailout:()=>v});var s={};t.r(s),t.d(s,{GET:()=>p,POST:()=>m});var a=t(10884),o=t(16132),u=t(21040),i=t(50467),n=t(27137),c=t(95798),d=t(96721),l=t.n(d);async function p(){let e=[];try{return e=await n._.find(),c.Z.json({status:200,statusText:"Success",data:e})}catch(e){return console.log("Failed to get resources:",e),c.Z.json({message:"Failed to get resources",success:!1,statusText:"Internal server error"},{status:500})}}async function m(e){let{firstname:r,lastname:t,email:s,userId:a}=await e.json(),o=e.cookies.get("authToken")?.value,u=l().verify(o,process.env.JWT_KEY);try{let e=new n._({firstname:r,lastname:t,email:s,userId:u._id}),a=await e.save(),o=c.Z.json({statusText:"Resource added successfully",data:a},{status:200});return o}catch(e){if(console.log("Failed to add resource:",e),11e3===e.code&&e.keyPattern&&e.keyPattern.email)return c.Z.json({statusText:"Bad Request",message:"Email already exists. Please use a different email.",success:!1},{status:409});return c.Z.json({message:"Failed to add resource",success:!1,statusText:"Internal Server Error"},{status:400})}}(0,i.u)();let g=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/resourc/route",pathname:"/api/resourc",filename:"route",bundlePath:"app/api/resourc/route"},resolvedPagePath:"C:\\Users\\6666\\Downloads\\rms\\src\\app\\api\\resourc\\route.js",nextConfigOutput:"",userland:s}),{requestAsyncStorage:q,staticGenerationAsyncStorage:x,serverHooks:y,headerHooks:f,staticGenerationBailout:v}=g,h="/api/resourc/route";function R(){return(0,u.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:x})}},50467:(e,r,t)=>{t.d(r,{u:()=>u});var s=t(11185),a=t.n(s);let{MONGO_URI:o}=process.env,u=async()=>{try{await a().connect(o),console.log("Db connected")}catch(e){console.log("Failed to connect",e)}}},27137:(e,r,t)=>{t.d(r,{_:()=>u});let{Schema:s,default:a}=t(11185),o=new s({firstname:{type:String,required:[!0,"Resource first name is required"]},lastname:{type:String,required:[!0,"Resource last name is required"]},email:{type:String,required:[!0,"Resource email id is required"],unique:!0},userId:{type:a.ObjectId,required:[!0,"Resource email id is required"],index:!0}}),u=a.models.Resources||a.model("Resources",o)}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[271,107,721],()=>t(13155));module.exports=s})();