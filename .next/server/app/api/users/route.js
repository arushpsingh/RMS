"use strict";(()=>{var e={};e.id=701,e.ids=[701],e.modules={58802:e=>{e.exports=require("bcrypt")},11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},97821:(e,s,t)=>{t.r(s),t.d(s,{headerHooks:()=>w,originalPathname:()=>x,patchFetch:()=>v,requestAsyncStorage:()=>y,routeModule:()=>g,serverHooks:()=>h,staticGenerationAsyncStorage:()=>q,staticGenerationBailout:()=>f});var r={};t.r(r),t.d(r,{GET:()=>p,POST:()=>m});var a=t(10884),n=t(16132),o=t(21040),u=t(50467),i=t(48779),d=t(95798),c=t(58802),l=t.n(c);async function p(){let e=[];try{e=await i.n.find().select("-password")}catch(e){return console.log(e),d.Z.json({message:"Failed to get user",success:!1})}return d.Z.json({status:200,statusText:"Success",data:e})}async function m(e){let s=await e.json(),t=new i.n(s);try{t.password=l().hashSync(t.password,10);let e=await t.save(),s=d.Z.json({status:201,statusText:"User added successfully",data:e});return s}catch(e){if(console.log("Failed to add user:",e),11e3===e.code&&e.keyPattern&&e.keyPattern.email)return d.Z.json({status:!1,statusText:"Bad Request",message:"Email already exists. Please use a different email."},{status:409});return d.Z.json({message:"Failed to add user",status:!1},{status:400})}}(0,u.u)();let g=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/users/route",pathname:"/api/users",filename:"route",bundlePath:"app/api/users/route"},resolvedPagePath:"C:\\Users\\6666\\Downloads\\rms\\src\\app\\api\\users\\route.js",nextConfigOutput:"",userland:r}),{requestAsyncStorage:y,staticGenerationAsyncStorage:q,serverHooks:h,headerHooks:w,staticGenerationBailout:f}=g,x="/api/users/route";function v(){return(0,o.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:q})}},50467:(e,s,t)=>{t.d(s,{u:()=>o});var r=t(11185),a=t.n(r);let{MONGO_URI:n}=process.env,o=async()=>{try{await a().connect(n),console.log("Db connected")}catch(e){console.log("Failed to connect",e)}}},48779:(e,s,t)=>{t.d(s,{n:()=>o});let{Schema:r,default:a}=t(11185),n=new r({firstname:{type:String,required:[!0,"First name is required"]},lastname:{type:String,required:[!0,"Last name is required"]},email:{type:String,required:[!0,"Email id is required"],unique:!0},password:{type:String,required:[!0,"Password is required"]}}),o=a.models.Users||a.model("Users",n)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[271,107],()=>t(97821));module.exports=r})();