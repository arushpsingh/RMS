"use strict";(()=>{var e={};e.id=740,e.ids=[740],e.modules={58802:e=>{e.exports=require("bcrypt")},11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},12781:e=>{e.exports=require("stream")},73837:e=>{e.exports=require("util")},86089:(e,s,r)=>{r.r(s),r.d(s,{headerHooks:()=>h,originalPathname:()=>w,patchFetch:()=>v,requestAsyncStorage:()=>q,routeModule:()=>g,serverHooks:()=>y,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>x});var t={};r.r(t),r.d(t,{POST:()=>m});var n=r(10884),o=r(16132),a=r(21040),i=r(48779),u=r(95798),c=r(58802),l=r.n(c),d=r(96721),p=r.n(d);async function m(e){let{email:s,password:r}=await e.json();try{if(!s||!r)return u.Z.json({message:"Email and password are required",success:!1},{status:400});let e=await i.n.findOne({email:s});if(console.log(e),null===e)return u.Z.json({message:"User not found",success:!1},{status:404});let t=l().compareSync(r,e.password);if(!t)return u.Z.json({message:"Incorrect password",success:!1},{status:401});let n=p().sign({_id:e._id,name:e.name},process.env.JWT_KEY),o=u.Z.json({message:"Login successfully",success:!0,user:e},{status:200});return o.cookies.set("authToken",n,{expiresIn:"1d",httpOnly:!0}),console.log("token",o),o}catch(e){return u.Z.json({message:e.message,success:!1},{status:500})}}(0,r(50467).u)();let g=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/login/route",pathname:"/api/login",filename:"route",bundlePath:"app/api/login/route"},resolvedPagePath:"C:\\Users\\6666\\Downloads\\rms\\src\\app\\api\\login\\route.js",nextConfigOutput:"",userland:t}),{requestAsyncStorage:q,staticGenerationAsyncStorage:f,serverHooks:y,headerHooks:h,staticGenerationBailout:x}=g,w="/api/login/route";function v(){return(0,a.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:f})}},50467:(e,s,r)=>{r.d(s,{u:()=>a});var t=r(11185),n=r.n(t);let{MONGO_URI:o}=process.env,a=async()=>{try{await n().connect(o),console.log("Db connected")}catch(e){console.log("Failed to connect",e)}}},48779:(e,s,r)=>{r.d(s,{n:()=>a});let{Schema:t,default:n}=r(11185),o=new t({firstname:{type:String,required:[!0,"First name is required"]},lastname:{type:String,required:[!0,"Last name is required"]},email:{type:String,required:[!0,"Email id is required"],unique:!0},password:{type:String,required:[!0,"Password is required"]}}),a=n.models.Users||n.model("Users",o)}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[271,107,721],()=>r(86089));module.exports=t})();